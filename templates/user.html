{% extends 'index.html' %}

{% block sidea_content %}
<div class="window sidea" style="gap:20px; margin-top: 150px;">

    <div>
    {% if user.user_image %}
        <img src="{{ user.user_image }}" alt="User Image" class="circular-image" style="height: 6rem;width: 6rem;">
    {% endif %}
    </div>
    <div style="display: flex;width: 100%; flex-direction: column;">
        <div style="display: flex;width: 100%;">
                <div style="display: flex; justify-content: space-between;width: 100%;">
                    <h2 style="margin: 0;">Hi, I'm {{ user.first_name }}</h2>
                    <span style="margin-left: auto;margin-top: 10px;"><strong>{{ user.calculate_age() }}</strong></span>
                    <br>
                </div>  
        </div>
        <div>
            <div style="border: 0.5px rgba(182, 182, 182, 0.397) solid; margin:10px 0 10px 0;"></div>
        </div>
        <div>
            <h3>WORK</h3>
            <p>Northwestern Mutual-Financial Planning Associate</p>
        </div>
        <div>
            <h3>SCHOOL</h3>
            <p>Berkeley College-General Business</p>
        </div>
        <div>
            <h3>INTRODUCTION</h3>
            <p>{{ user.intro }}</p>
         </div>
    </div>  

      
</div>

 
{% endblock %}

 

{% block main_content %}


    <div>
        <div>
            <h2>Posts by {{ user.first_name }}</h2>
        </div>
        <div class="card-box">
            {% if posts %}
                {% for post in posts %}
                    <div class="card" data-href="/posts/{{ post.id }}">
                            <div class="user-info"> 
                                <img src="{{ user.user_image }}" alt="User Image" class="circular-image" style="border-radius: 50%; overflow: hidden;">
                                <div style="display: flex; gap: 10px">
                                    <h2 style="margin-top: 4px; font-size: 1.5rem; line-height: 1; padding: 0;">
                                        <a href="/users/profile/{{ post.user_id }}" style="text-decoration: none;">
                                            {{ user.first_name }}
                                        </a>
                                    </h2>
                                    <i class="fa-regular fa-circle-check" style="color: green; margin-top: 8px"></i>
                                    <strong style="margin-top: 6px">â€¢</strong>
                                    <small style="margin-top: 8px"><strong>{{ user.calculate_age() }}</strong></small>
                                </div>
                            </div>
                        <div class="image-gallery">
                            {% if post.images %}
                                <div class="gallery-container" data-images="{{ post.images | map(attribute='file_name') | join(',') }}">
                                    <img id="gallery-image" src="/static/uploads/{{ post.images[0].file_name }}" alt="Post Image">
                                    <button style="padding: 0px; border: 0px;"><i class="fa-solid fa-circle-chevron-left nav-button prev-button"></i></button>
                                    <button style="padding: 0px; border: 0px;"><i class="fa-solid fa-circle-chevron-right nav-button next-button"></i></button>
                                </div>
                            {% else %}
                                <p>No images available for this post.</p>
                            {% endif %}
                        </div>
                        <div class="card-details">
                            <div>
                                <h2 style="margin: 8px; display: inline-block; margin-right: 2px;">${{ post.price }}</h2>
                                <h1 style="display: inline-block">/mo</h1>
                            </div>
                            <div>
                                <h1 style="margin: 0px; margin-bottom: 5px;">{{ post.title }}</h1>
                            </div>
                            <div style="align-self: flex-start; justify-self: flex-end;">
                                <small><strong>Borough:</strong> {{ post.borough }}</small><br>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p>No posts available.</p>
            {% endif %}
        </div>
    </div>
    <br>
    <div>
        <!-- Trigger Button -->
        <button id="open-modal" class="btn">Add Post</button>
    
        <!-- Modal Structure -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span id="close-modal" class="close">&times;</span>
                <div class="register">
                    <form id="post-form" method="POST" enctype="multipart/form-data" style="display: flex; flex-direction: row; justify-content: space-around;">
                        <div style="display: flex; flex-direction: column; gap:40px"> 
                            {{ form.hidden_tag() }} 
                            {{ form.title.label }}
                            {{ form.description.label }} 
                            {{ form.address.label }} 
                            {{ form.neighbor.label }} 
                            {{ form.borough.label }}
                            {{ form.images.label }}
                            {{ form.price.label }} 
                            {{ form.neighborhood.label }}
                        </div>
                        <div style="display: flex; flex-direction: column; gap:27px">
                            {{ form.title() }}
                            {{ form.description() }} 
                            {{ form.address() }}
                            {{ form.neighbor() }} 
                            {{ form.borough() }}
                            {{ form.images(multiple=True) }} 
                            {{ form.price() }} 
                            {{ form.neighborhood() }} 
                            {{ form.submit() }}
                        </div>

                    </form>
                    
                    
                </div>
            </div>
        </div>
    </div>



{% endblock %}
